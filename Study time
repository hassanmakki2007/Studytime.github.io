<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study Time</title>
<script src="https://cdn.tailwindcss.com/3.4.16"></script>
<script src="https://accounts.google.com/gsi/client" async></script>
<script>tailwind.config={theme:{extend:{colors:{primary:'#FF5722',secondary:'#2196F3'},borderRadius:{'none':'0px','sm':'4px',DEFAULT:'8px','md':'12px','lg':'16px','xl':'20px','2xl':'24px','3xl':'32px','full':'9999px','button':'8px'}}}}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
<style>
:where([class^="ri-"])::before { content: "\f3c2"; }
body {
font-family: 'Cairo', sans-serif;
direction: rtl;
}
.progress-bar {
width: 100%;
height: 8px;
background-color: #E0E0E0;
border-radius: 4px;
overflow: hidden;
}
.progress-fill {
height: 100%;
border-radius: 4px;
}
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
-webkit-appearance: none;
margin: 0;
}
</style>
</head>
<body class="bg-gray-50">
<div id="loginModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
<div class="bg-white rounded-lg p-6 m-4 max-w-sm w-full">
<div class="flex justify-between items-start mb-6">
<div class="text-center flex-1">
<h2 class="text-2xl font-bold mb-2">مرحباً بك</h2>
<p class="text-gray-600">قم بتسجيل الدخول للمتابعة</p>
</div>
<button class="w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-700" onclick="document.getElementById('loginModal').classList.add('hidden')">
<i class="ri-close-line ri-lg"></i>
</button>
</div>
<form id="loginForm" class="space-y-4 mb-4">
<div>
<input type="email" id="email" placeholder="البريد الإلكتروني" class="w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:border-primary" required>
</div>
<div>
<input type="password" id="password" placeholder="كلمة المرور" class="w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:border-primary" required>
</div>
<button type="submit" class="w-full bg-primary text-white py-2 rounded-button font-medium hover:bg-primary/90">
تسجيل الدخول
</button>
</form>
<div class="relative mb-4">
<div class="absolute inset-0 flex items-center">
<div class="w-full border-t border-gray-300"></div>
</div>
<div class="relative flex justify-center text-sm">
<span class="px-2 bg-white text-gray-500">أو</span>
</div>
</div>
<div id="g_id_onload"
data-client_id="YOUR_GOOGLE_CLIENT_ID"
data-context="signin"
data-callback="handleGoogleSignIn"
data-auto_prompt="false">
</div>
<div class="g_id_signin w-full"
data-type="standard"
data-shape="rectangular"
data-theme="outline"
data-text="signin_with"
data-size="large"
data-logo_alignment="center"
data-width="100%">
</div>
<div class="mt-4 text-center">
<p class="text-sm text-gray-600">
ليس لديك حساب؟
<button id="showRegister" class="text-primary font-medium hover:underline">إنشاء حساب جديد</button>
</p>
</div>
</div>
</div>
<div id="registerModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
<div class="bg-white rounded-lg p-6 m-4 max-w-sm w-full">
<div class="flex justify-between items-start mb-6">
<div class="text-center flex-1">
<h2 class="text-2xl font-bold mb-2">إنشاء حساب جديد</h2>
<p class="text-gray-600">أدخل بياناتك للتسجيل</p>
</div>
<button class="w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-700" onclick="document.getElementById('registerModal').classList.add('hidden')">
<i class="ri-close-line ri-lg"></i>
</button>
</div>
<form id="registerForm" class="space-y-4 mb-4">
<div>
<input type="text" id="fullName" placeholder="الاسم الكامل" class="w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:border-primary" required>
</div>
<div>
<input type="email" id="registerEmail" placeholder="البريد الإلكتروني" class="w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:border-primary" required>
</div>
<div>
<input type="password" id="registerPassword" placeholder="كلمة المرور" class="w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:border-primary" required>
</div>
<div>
<input type="password" id="confirmPassword" placeholder="تأكيد كلمة المرور" class="w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:border-primary" required>
</div>
<button type="submit" class="w-full bg-primary text-white py-2 rounded-button font-medium hover:bg-primary/90">
إنشاء حساب
</button>
</form>
<div class="relative mb-4">
<div class="absolute inset-0 flex items-center">
<div class="w-full border-t border-gray-300"></div>
</div>
<div class="relative flex justify-center text-sm">
<span class="px-2 bg-white text-gray-500">أو</span>
</div>
</div>
<div class="g_id_signin w-full"
data-type="standard"
data-shape="rectangular"
data-theme="outline"
data-text="signup_with"
data-size="large"
data-logo_alignment="center"
data-width="100%">
</div>
<div class="mt-4 text-center">
<p class="text-sm text-gray-600">
لديك حساب بالفعل؟
<button id="showLogin" class="text-primary font-medium hover:underline">تسجيل الدخول</button>
</p>
</div>
</div>
</div>
<!-- Nav Bar -->
<div class="fixed top-0 w-full bg-white shadow-md z-50">
<div class="flex items-center justify-between px-4 py-3">
<div class="text-xl font-['Pacifico'] text-primary cursor-pointer" onclick="switchToVideos()">Study Time</div>
<div class="flex items-center space-x-2">
<div class="bg-primary/10 rounded-full px-4 py-1 flex items-center">
<i class="ri-coin-line ri-lg text-primary"></i>
<span class="text-primary font-bold mr-1" id="userPoints">0</span>
</div>
<div class="w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full">
<i class="ri-notification-3-line text-gray-600"></i>
</div>
</div>
</div>
</div>
<!-- Content Area -->
<div class="pt-16 pb-20 px-4" id="videosPage">
<!-- Educational Videos Section -->
<div class="mb-6">
<div class="flex justify-between items-center mb-3">
<h2 class="text-xl font-bold text-gray-800">الفيديوهات التعليمية</h2>
<button onclick="document.getElementById('uploadModal').classList.remove('hidden'); document.getElementById('uploadModal').classList.add('flex');" class="bg-primary text-white px-4 py-2 rounded-button flex items-center">
<i class="ri-upload-2-line mr-1"></i>
رفع فيديو
</button>
</div>
<!-- Upload Modal -->
<div id="uploadModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
<div class="bg-white rounded-lg p-6 m-4 max-w-sm w-full">
<div class="flex justify-between items-start mb-6">
<div class="text-center flex-1">
<h2 class="text-2xl font-bold mb-2">رفع فيديو جديد</h2>
<p class="text-gray-600">قم برفع الفيديو التعليمي</p>
</div>
<button class="w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-700" onclick="document.getElementById('uploadModal').classList.remove('flex'); document.getElementById('uploadModal').classList.add('hidden');">
<i class="ri-close-line ri-lg"></i>
</button>
</div>
<form id="uploadForm" class="space-y-4">
<div class="relative border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors" onclick="document.getElementById('videoInput').click()">
<input type="file" id="videoInput" class="hidden" accept="video/*" onchange="handleFileSelect(this)">
<i class="ri-upload-cloud-2-line ri-3x text-gray-400 mb-2"></i>
<p class="text-gray-600">اضغط هنا لاختيار الفيديو أو قم بسحب الملف</p>
<p class="text-xs text-gray-500 mt-1">MP4, MOV حتى 500MB</p>
</div>
<div id="uploadPreview" class="hidden">
<div class="bg-gray-100 rounded p-3 flex items-center">
<i class="ri-file-video-line text-primary mr-2"></i>
<div class="flex-1 truncate">
<p class="font-medium text-sm" id="fileName"></p>
<p class="text-xs text-gray-500" id="fileSize"></p>
</div>
<button type="button" onclick="resetFileInput()" class="text-red-500 hover:text-red-700">
<i class="ri-delete-bin-line"></i>
</button>
</div>
</div>
<div>
<input type="text" placeholder="عنوان الفيديو" class="w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:border-primary" required>
</div>
<div>
<textarea placeholder="وصف الفيديو" class="w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:border-primary" rows="3" required></textarea>
</div>
<button type="submit" class="w-full bg-primary text-white py-2 rounded-button font-medium hover:bg-primary/90">
رفع الفيديو
</button>
</form>
</div>
</div>
<div class="space-y-3" id="videoContainer">
<!-- سيتم إضافة الفيديوهات هنا ديناميكياً -->
</div>
</div>
<!-- Timer Lock -->
<div class="mb-4 bg-white rounded-lg shadow p-4">
<div class="relative w-full" style="padding-top: 56.25%;">
<video id="educationalVideo" class="absolute top-0 left-0 w-full h-full object-cover" poster="https://readdy.ai/api/search-image?query=Professional%20educational%20video%20thumbnail%2C%20online%20learning%20platform%20interface%2C%20e-learning%20content%2C%20high-quality%20video%20player%20screenshot%2C%20educational%20content%20thumbnail%2C%20digital%20classroom%2C%20modern%20UI%20design&width=375&height=211&seq=1&orientation=landscape">
<source src="https://public.readdy.ai/gen_page/sample_video.mp4" type="video/mp4">
</video>
<div class="absolute top-0 left-0 w-full h-full bg-black/50 flex items-center justify-center video-overlay cursor-pointer" id="mainVideoOverlay">
<i class="ri-play-circle-fill ri-3x text-white"></i>
</div>
</div>
<div class="p-4">
<h2 class="font-bold text-lg mb-2">أساسيات البرمجة بلغة Python</h2>
<div class="flex items-center justify-between">
<div class="flex items-center">
<i class="ri-time-line text-gray-500 ml-1"></i>
<span class="text-sm text-gray-500">المدة: 45 دقيقة</span>
</div>
<div class="flex items-center">
<i class="ri-coin-line text-yellow-500 ml-1"></i>
<span class="text-sm font-bold">100 نقطة</span>
</div>
</div>
</div>
</div>
<!-- Timer Lock -->
<div class="mb-4 bg-white rounded-lg shadow p-4">
<div class="flex justify-between items-center mb-2">
<h3 class="font-bold text-gray-800">الوقت المتبقي للإكمال</h3>
<div class="flex items-center text-primary">
<i class="ri-lock-line ml-1"></i>
<span class="text-sm" id="lockStatus">مقفل</span>
</div>
</div>
<div class="flex items-center justify-between">
<div class="flex items-center">
<i class="ri-time-line ri-lg text-primary ml-2"></i>
<span class="text-xl font-bold text-primary countdown">45:00</span>
</div>
<div class="flex items-center">
<span class="text-sm text-gray-500 ml-2">اكتمال المشاهدة</span>
<span class="font-bold" id="completionPercentage">0%</span>
</div>
</div>
<div class="mt-3 w-full bg-gray-200 rounded-full h-2">
<div class="bg-primary h-2 rounded-full" id="progressBar" style="width: 0%"></div>
</div>
</div>
<!-- Video Information -->
<div class="bg-white rounded-lg shadow p-4">
<h3 class="font-bold text-lg mb-3">معلومات الدرس</h3>
<div class="space-y-4">
<div>
<h4 class="font-bold mb-2">الوصف</h4>
<p class="text-sm text-gray-600">تعلم أساسيات البرمجة بلغة Python من الصفر. يغطي هذا الدرس المفاهيم الأساسية للبرمجة وكيفية كتابة الكود البسيط.</p>
</div>
<div>
<h4 class="font-bold mb-2">ما ستتعلمه</h4>
<ul class="text-sm text-gray-600 space-y-2">
<li class="flex items-center">
<i class="ri-checkbox-circle-line text-primary ml-2"></i>
<span>مقدمة في البرمجة ولغة Python</span>
</li>
<li class="flex items-center">
<i class="ri-checkbox-circle-line text-primary ml-2"></i>
<span>المتغيرات وأنواع البيانات</span>
</li>
<li class="flex items-center">
<i class="ri-checkbox-circle-line text-primary ml-2"></i>
<span>الهياكل الشرطية والحلقات</span>
</li>
</ul>
</div>
<div class="flex items-center justify-between p-3 bg-primary/10 rounded-lg">
<div>
<p class="text-sm font-bold mb-1">المكافأة عند الإكمال</p>
<div class="flex items-center">
<i class="ri-coin-line text-yellow-500 ml-1"></i>
<span class="font-bold">100 نقطة</span>
</div>
</div>
<i class="ri-award-line text-primary ri-2x"></i>
</div>
</div>
</div>
</div>
<!-- Rewards Categories -->
<div class="mb-6">
<h2 class="text-xl font-bold mb-3 text-gray-800">فئات المكافآت</h2>
<div class="flex overflow-x-auto pb-2 space-x-3">
<div class="flex-shrink-0 w-20 flex flex-col items-center cursor-pointer">
<div class="w-16 h-16 rounded-full overflow-hidden bg-primary/10 flex items-center justify-center mb-1">
<img src="https://readdy.ai/api/search-image?query=icon%2C%203D%20cartoon%2C%20Cash%20money%2C%20the%20icon%20should%20take%20up%2070%25%20of%20the%20frame%2C%20vibrant%20colors%20with%20soft%20gradients%2C%20minimalist%20design%2C%20smooth%20rounded%20shapes%2C%20subtle%20shading%2C%20no%20outlines%2C%20centered%20composition%2C%20isolated%20on%20white%20background%2C%20playful%20and%20friendly%20aesthetic%2C%20isometric%20perspective%2C%20high%20detail%20quality%2C%20clean%20and%20modern%20look%2C%20single%20object%20focus&width=64&height=64&seq=1&orientation=squarish" class="w-full h-full object-cover" alt="نقدية">
</div>
<span class="text-xs text-center whitespace-nowrap overflow-hidden text-overflow-ellipsis w-full">نقدية</span>
</div>
<div class="flex-shrink-0 w-20 flex flex-col items-center cursor-pointer">
<div class="w-16 h-16 rounded-full overflow-hidden bg-primary/10 flex items-center justify-center mb-1">
<img src="https://readdy.ai/api/search-image?query=icon%2C%203D%20cartoon%2C%20Gift%20voucher%2C%20the%20icon%20should%20take%20up%2070%25%20of%20the%20frame%2C%20vibrant%20colors%20with%20soft%20gradients%2C%20minimalist%20design%2C%20smooth%20rounded%20shapes%2C%20subtle%20shading%2C%20no%20outlines%2C%20centered%20composition%2C%20isolated%20on%20white%20background%2C%20playful%20and%20friendly%20aesthetic%2C%20isometric%20perspective%2C%20high%20detail%20quality%2C%20clean%20and%20modern%20look%2C%20single%20object%20focus&width=64&height=64&seq=2&orientation=squarish" class="w-full h-full object-cover" alt="قسائم شراء">
</div>
<span class="text-xs text-center whitespace-nowrap overflow-hidden text-overflow-ellipsis w-full">قسائم شراء</span>
</div>
<div class="flex-shrink-0 w-20 flex flex-col items-center cursor-pointer">
<div class="w-16 h-16 rounded-full overflow-hidden bg-primary/10 flex items-center justify-center mb-1">
<img src="https://readdy.ai/api/search-image?query=icon%2C%203D%20cartoon%2C%20Services%2C%20the%20icon%20should%20take%20up%2070%25%20of%20the%20frame%2C%20vibrant%20colors%20with%20soft%20gradients%2C%20minimalist%20design%2C%20smooth%20rounded%20shapes%2C%20subtle%20shading%2C%20no%20outlines%2C%20centered%20composition%2C%20isolated%20on%20white%20background%2C%20playful%20and%20friendly%20aesthetic%2C%20isometric%20perspective%2C%20high%20detail%20quality%2C%20clean%20and%20modern%20look%2C%20single%20object%20focus&width=64&height=64&seq=3&orientation=squarish" class="w-full h-full object-cover" alt="خدمات">
</div>
<span class="text-xs text-center whitespace-nowrap overflow-hidden text-overflow-ellipsis w-full">خدمات</span>
</div>
<div class="flex-shrink-0 w-20 flex flex-col items-center cursor-pointer">
<div class="w-16 h-16 rounded-full overflow-hidden bg-primary/10 flex items-center justify-center mb-1">
<img src="https://readdy.ai/api/search-image?query=icon%2C%203D%20cartoon%2C%20Subscription%2C%20the%20icon%20should%20take%20up%2070%25%20of%20the%20frame%2C%20vibrant%20colors%20with%20soft%20gradients%2C%20minimalist%20design%2C%20smooth%20rounded%20shapes%2C%20subtle%20shading%2C%20no%20outlines%2C%20centered%20composition%2C%20isolated%20on%20white%20background%2C%20playful%20and%20friendly%20aesthetic%2C%20isometric%20perspective%2C%20high%20detail%20quality%2C%20clean%20and%20modern%20look%2C%20single%20object%20focus&width=64&height=64&seq=4&orientation=squarish" class="w-full h-full object-cover" alt="اشتراكات">
</div>
<span class="text-xs text-center whitespace-nowrap overflow-hidden text-overflow-ellipsis w-full">اشتراكات</span>
</div>
<div class="flex-shrink-0 w-20 flex flex-col items-center cursor-pointer">
<div class="w-16 h-16 rounded-full overflow-hidden bg-primary/10 flex items-center justify-center mb-1">
<img src="https://readdy.ai/api/search-image?query=icon%2C%203D%20cartoon%2C%20Electronics%2C%20the%20icon%20should%20take%20up%2070%25%20of%20the%20frame%2C%20vibrant%20colors%20with%20soft%20gradients%2C%20minimalist%20design%2C%20smooth%20rounded%20shapes%2C%20subtle%20shading%2C%20no%20outlines%2C%20centered%20composition%2C%20isolated%20on%20white%20background%2C%20playful%20and%20friendly%20aesthetic%2C%20isometric%20perspective%2C%20high%20detail%20quality%2C%20clean%20and%20modern%20look%2C%20single%20object%20focus&width=64&height=64&seq=5&orientation=squarish" class="w-full h-full object-cover" alt="إلكترونيات">
</div>
<span class="text-xs text-center whitespace-nowrap overflow-hidden text-overflow-ellipsis w-full">إلكترونيات</span>
</div>
</div>
</div>
</div>
<!-- Rewards Page -->
<div class="pt-16 pb-20 px-4 hidden" id="rewardsPage">
<!-- Featured Rewards -->
<div class="mb-6">
<h2 class="text-xl font-bold mb-3 text-gray-800">مكافآت مميزة</h2>
<div class="grid grid-cols-2 gap-3">
<div class="bg-white rounded-lg shadow-sm overflow-hidden cursor-pointer">
<div class="h-28 overflow-hidden">
<img src="https://readdy.ai/api/search-image?query=Realistic%20gift%20card%2C%20Amazon%20gift%20card%2C%20high-quality%20product%20photography%2C%20clean%20white%20background%2C%20professional%20lighting%2C%20centered%20composition%2C%20sharp%20details%2C%20minimalist%20style%2C%20commercial%20product%20shot%2C%20isolated%20product%2C%20professional%20e-commerce%20photography%2C%20crisp%20edges%2C%20premium%20look%20and%20feel&width=180&height=112&seq=6&orientation=landscape" class="w-full h-full object-cover object-top" alt="بطاقة هدايا أمازون">
</div>
<div class="p-3">
<h3 class="font-bold text-sm mb-1">بطاقة هدايا أمازون</h3>
<div class="flex justify-between items-center">
<div class="flex items-center">
<i class="ri-coin-line text-yellow-500 mr-1"></i>
<span class="text-xs font-bold">1,500 نقطة</span>
</div>
<button class="bg-primary text-white text-xs px-2 py-1 rounded-button cursor-pointer" onclick="redeemReward('بطاقة هدايا أمازون', 1500)">استبدال</button>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow-sm overflow-hidden cursor-pointer">
<div class="h-28 overflow-hidden">
<img src="https://readdy.ai/api/search-image?query=Realistic%20gift%20card%2C%20Netflix%20subscription%20card%2C%20high-quality%20product%20photography%2C%20clean%20white%20background%2C%20professional%20lighting%2C%20centered%20composition%2C%20sharp%20details%2C%20minimalist%20style%2C%20commercial%20product%20shot%2C%20isolated%20product%2C%20professional%20e-commerce%20photography%2C%20crisp%20edges%2C%20premium%20look%20and%20feel&width=180&height=112&seq=7&orientation=landscape" class="w-full h-full object-cover object-top" alt="اشتراك نتفليكس">
</div>
<div class="p-3">
<h3 class="font-bold text-sm mb-1">اشتراك نتفليكس</h3>
<div class="flex justify-between items-center">
<div class="flex items-center">
<i class="ri-coin-line text-yellow-500 mr-1"></i>
<span class="text-xs font-bold">2,000 نقطة</span>
</div>
<button class="bg-primary text-white text-xs px-2 py-1 rounded-button cursor-pointer" onclick="redeemReward('اشتراك نتفليكس', 2000)">استبدال</button>
</div>
</div>
</div>
</div>
</div>
<!-- All Rewards -->
<div>
<h2 class="text-xl font-bold mb-3 text-gray-800">جميع المكافآت</h2>
<div class="space-y-3" id="allRewardsContainer">
<!-- سيتم إضافة المكافآت هنا ديناميكياً -->
</div>
</div>
</div>
<!-- Profile Page (Hidden by default) -->
<div class="pt-16 pb-20 px-4 hidden" id="profilePage">
<div class="flex flex-col items-center mb-6 bg-white rounded-lg shadow p-4 mt-3">
<div class="w-24 h-24 rounded-full overflow-hidden border-4 border-primary mb-3">
<img src="https://static.readdy.ai/image/ddc3a0bcd87da724c7129110fb2f7d18/ddf0eb05474860f8c8bafefaca9d5cb3.png" class="w-full h-full object-cover" alt="صورة الملف الشخصي" id="profileImage">
</div>
<h2 class="text-xl font-bold" id="profileUsername">المستخدم</h2>
<p class="text-gray-500 text-sm mb-3" id="profileHandle">@user</p>
<div class="flex justify-between w-full">
<div class="text-center">
<p class="text-xs text-gray-500">وقت المشاهدة</p>
<p class="font-bold" id="watchTime">0 ساعة</p>
</div>
<div class="text-center">
<p class="text-xs text-gray-500">الفيديوهات</p>
<p class="font-bold" id="videosCount">0</p>
</div>
<div class="text-center">
<p class="text-xs text-gray-500">النقاط</p>
<p class="font-bold" id="profilePoints">0</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow p-4 mb-6">
<h3 class="font-bold text-lg mb-3">إحصائيات المشاهدة</h3>
<div class="h-48 bg-gray-100 rounded flex items-center justify-center mb-3">
<img src="https://readdy.ai/api/search-image?query=Clean%2C%20minimalist%20data%20visualization%20chart%20showing%20viewing%20statistics%2C%20professional%20infographic%20with%20bar%20charts%20and%20line%20graphs%2C%20modern%20UI%20design%2C%20light%20color%20scheme%2C%20analytics%20dashboard%20element%2C%20clean%20white%20background%20with%20subtle%20grid%2C%20data%20points%20clearly%20marked%2C%20information%20design%2C%20professional%20business%20graphics&width=327&height=192&seq=12&orientation=landscape" class="w-full h-full object-cover rounded" alt="إحصائيات المشاهدة">
</div>
<div class="grid grid-cols-2 gap-3">
<div class="bg-gray-50 p-3 rounded">
<p class="text-xs text-gray-500">متوسط المشاهدة اليومي</p>
<p class="font-bold text-lg" id="avgWatchTime">0 ساعة</p>
</div>
<div class="bg-gray-50 p-3 rounded">
<p class="text-xs text-gray-500">أفضل يوم</p>
<p class="font-bold text-lg" id="bestDay">-</p>
</div>
</div>
</div>
<div class="bg-white rounded-lg shadow p-4 mb-6">
<h3 class="font-bold text-lg mb-3">الإعدادات</h3>
<div class="space-y-3">
<div class="flex items-center justify-between p-2 border-b cursor-pointer" onclick="showSettingsModal('profile')">
<div class="flex items-center">
<div class="w-8 h-8 flex items-center justify-center bg-primary/10 rounded-full mr-3">
<i class="ri-user-settings-line text-primary"></i>
</div>
<span>تعديل الملف الشخصي</span>
</div>
<i class="ri-arrow-left-s-line"></i>
</div>
<div class="flex items-center justify-between p-2 border-b cursor-pointer" onclick="showSettingsModal('privacy')">
<div class="flex items-center">
<div class="w-8 h-8 flex items-center justify-center bg-primary/10 rounded-full mr-3">
<i class="ri-lock-line text-primary"></i>
</div>
<span>إعدادات الخصوصية</span>
</div>
<i class="ri-arrow-left-s-line"></i>
</div>
<div class="flex items-center justify-between p-2 border-b cursor-pointer" onclick="showSettingsModal('notifications')">
<div class="flex items-center">
<div class="w-8 h-8 flex items-center justify-center bg-primary/10 rounded-full mr-3">
<i class="ri-notification-line text-primary"></i>
</div>
<span>إعدادات الإشعارات</span>
</div>
<i class="ri-arrow-left-s-line"></i>
</div>
<div class="flex items-center justify-between p-2 cursor-pointer" onclick="handleLogout()">
<div class="flex items-center">
<div class="w-8 h-8 flex items-center justify-center bg-red-100 rounded-full mr-3">
<i class="ri-logout-box-line text-red-500"></i>
</div>
<span class="text-red-500">تسجيل الخروج</span>
</div>
<i class="ri-arrow-left-s-line text-red-500"></i>
</div>
</div>
</div>
</div>
<!-- History Page (Hidden by default) -->
<div class="pt-16 pb-20 px-4 hidden" id="historyPage">
<!-- Tab Switcher -->
<div class="bg-gray-100 p-1 rounded-full flex mb-6 mt-3">
<button class="flex-1 py-2 rounded-full bg-white text-primary font-bold shadow-sm text-sm history-tab active" data-tab="viewingHistory">سجل المشاهدات</button>
<button class="flex-1 py-2 rounded-full text-gray-500 font-medium text-sm history-tab" data-tab="rewardsHistory">سجل المكافآت</button>
</div>
<!-- Viewing History Tab -->
<div id="viewingHistory" class="history-content">
<div class="space-y-3" id="viewingHistoryContainer">
<!-- سيتم إضافة سجل المشاهدات هنا ديناميكياً -->
</div>
</div>
<!-- Rewards History Tab (Hidden by default) -->
<div id="rewardsHistory" class="history-content hidden">
<div class="space-y-3" id="rewardsHistoryContainer">
<!-- سيتم إضافة سجل المكافآت هنا ديناميكياً -->
</div>
</div>
</div>
<!-- Tab Bar -->
<div class="fixed bottom-0 w-full bg-white shadow-[0_-2px_10px_rgba(0,0,0,0.05)] z-50">
<div class="grid grid-cols-4 h-16">
<div class="flex flex-col items-center justify-center cursor-pointer tab-item active" data-page="videos">
<i class="ri-video-line ri-lg mb-1 text-primary"></i>
<span class="text-xs text-primary">المقاطع التعليمية</span>
</div>
<div class="flex flex-col items-center justify-center cursor-pointer tab-item" data-page="rewards">
<i class="ri-gift-line ri-lg mb-1 text-gray-500"></i>
<span class="text-xs text-gray-500">المكافآت</span>
</div>
<div class="flex flex-col items-center justify-center cursor-pointer tab-item" data-page="history">
<i class="ri-history-line ri-lg mb-1 text-gray-500"></i>
<span class="text-xs text-gray-500">السجل</span>
</div>
<div class="flex flex-col items-center justify-center cursor-pointer tab-item" data-page="profile">
<i class="ri-user-line ri-lg mb-1 text-gray-500"></i>
<span class="text-xs text-gray-500">الملف الشخصي</span>
</div>
</div>
</div>

<!-- Username Change Modal -->
<div id="usernameChangeModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
<div class="bg-white rounded-lg p-6 m-4 max-w-sm w-full">
<div class="flex justify-between items-start mb-6">
<div class="text-center flex-1">
<h2 class="text-2xl font-bold mb-2">تغيير اسم المستخدم</h2>
<p class="text-gray-600">أدخل اسم المستخدم الجديد</p>
</div>
<button class="w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-700" onclick="document.getElementById('usernameChangeModal').classList.remove('flex'); document.getElementById('usernameChangeModal').classList.add('hidden');">
<i class="ri-close-line ri-lg"></i>
</button>
</div>
<form id="usernameChangeForm" class="space-y-4">
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">اسم المستخدم</label>
<input type="text" id="newUsername" placeholder="أدخل اسم المستخدم الجديد" class="w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:border-primary" required>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">المعرف الشخصي</label>
<div class="flex items-center">
<span class="bg-gray-100 px-3 py-2 rounded-r border border-gray-300 text-gray-500">@</span>
<input type="text" id="newHandle" placeholder="المعرف الشخصي" class="w-full px-4 py-2 rounded-l border border-gray-300 focus:outline-none focus:border-primary" required>
</div>
</div>
<button type="submit" class="w-full bg-primary text-white py-2 rounded-button font-medium hover:bg-primary/90">
حفظ التغييرات
</button>
</form>
</div>
</div>

<script>
// تعريف المتغيرات العامة
let userData = {
  isLoggedIn: false,
  name: 'المستخدم',
  handle: '@user',
  email: '',
  points: 0,
  watchTime: 0,
  videosWatched: 0,
  watchHistory: [],
  rewardsHistory: [],
  picture: 'https://static.readdy.ai/image/ddc3a0bcd87da724c7129110fb2f7d18/ddf0eb05474860f8c8bafefaca9d5cb3.png'
};

// قائمة الفيديوهات التعليمية
const videoTopics = [
  {
    id: 1,
    title: "أساسيات البرمجة بلغة Python",
    duration: "45 دقيقة",
    points: 100,
    thumbnail: "Python programming tutorial",
    description: "تعلم أساسيات البرمجة بلغة Python من الصفر. يغطي هذا الدرس المفاهيم الأساسية للبرمجة وكيفية كتابة الكود البسيط.",
    videoUrl: "https://public.readdy.ai/gen_page/sample_video.mp4"
  },
  {
    id: 2,
    title: "أساسيات JavaScript للمبتدئين",
    duration: "30 دقيقة",
    points: 80,
    thumbnail: "JavaScript basics tutorial",
    description: "تعلم أساسيات لغة JavaScript للمبتدئين. يغطي هذا الدرس المفاهيم الأساسية للبرمجة بلغة JavaScript وكيفية استخدامها في تطوير الويب.",
    videoUrl: "https://public.readdy.ai/gen_page/sample_video.mp4"
  },
  {
    id: 3,
    title: "تعلم تطوير تطبيقات الموبايل",
    duration: "60 دقيقة",
    points: 120,
    thumbnail: "Mobile app development",
    description: "تعلم أساسيات تطوير تطبيقات الموبايل. يغطي هذا الدرس المفاهيم الأساسية لتطوير تطبيقات الهواتف الذكية وكيفية بناء تطبيق بسيط.",
    videoUrl: "https://public.readdy.ai/gen_page/sample_video.mp4"
  },
  {
    id: 4,
    title: "الذكاء الاصطناعي وتعلم الآلة",
    duration: "50 دقيقة",
    points: 110,
    thumbnail: "AI and machine learning",
    description: "مقدمة في الذكاء الاصطناعي وتعلم الآلة. يغطي هذا الدرس المفاهيم الأساسية للذكاء الاصطناعي وكيفية بناء نماذج تعلم الآلة البسيطة.",
    videoUrl: "https://public.readdy.ai/gen_page/sample_video.mp4"
  },
  {
    id: 5,
    title: "تصميم واجهات المستخدم UI/UX",
    duration: "40 دقيقة",
    points: 90,
    thumbnail: "UI UX design tutorial",
    description: "تعلم أساسيات تصميم واجهات المستخدم وتجربة المستخدم. يغطي هذا الدرس المفاهيم الأساسية لتصميم واجهات سهلة الاستخدام وجذابة.",
    videoUrl: "https://public.readdy.ai/gen_page/sample_video.mp4"
  },
  {
    id: 6,
    title: "قواعد البيانات SQL للمبتدئين",
    duration: "35 دقيقة",
    points: 85,
    thumbnail: "SQL database tutorial",
    description: "تعلم أساسيات قواعد البيانات SQL للمبتدئين. يغطي هذا الدرس المفاهيم الأساسية لقواعد البيانات وكيفية كتابة استعلامات SQL.",
    videoUrl: "https://public.readdy.ai/gen_page/sample_video.mp4"
  }
];

// قائمة المكافآت
const rewards = [
  {
    id: 1,
    title: "100 ريال سعودي",
    points: 3000,
    image: "https://readdy.ai/api/search-image?query=Realistic%20cash%20money%2C%20Saudi%20Riyal%20banknotes%2C%20high-quality%20product%20photography%2C%20clean%20white%20background%2C%20professional%20lighting%2C%20centered%20composition%2C%20sharp%20details%2C%20minimalist%20style%2C%20commercial%20product%20shot%2C%20isolated%20product%2C%20professional%20e-commerce%20photography%2C%20crisp%20edges%2C%20premium%20look%20and%20feel&width=80&height=80&seq=8&orientation=squarish",
    description: "تحويل مباشر لحسابك البنكي أو محفظتك الإلكترونية"
  },
  {
    id: 2,
    title: "اشتراك سبوتيفاي بريميوم",
    points: 1200,
    image: "https://readdy.ai/api/search-image?query=Realistic%20gift%20card%2C%20Spotify%20premium%20subscription%20card%2C%20high-quality%20product%20photography%2C%20clean%20white%20background%2C%20professional%20lighting%2C%20centered%20composition%2C%20sharp%20details%2C%20minimalist%20style%2C%20commercial%20product%20shot%2C%20isolated%20product%2C%20professional%20e-commerce%20photography%2C%20crisp%20edges%2C%20premium%20look%20and%20feel&width=80&height=80&seq=9&orientation=squarish",
    description: "اشتراك لمدة شهر في خدمة سبوتيفاي بريميوم"
  },
  {
    id: 3,
    title: "بطاقة متجر بلايستيشن",
    points: 4500,
    image: "https://readdy.ai/api/search-image?query=Realistic%20gift%20card%2C%20PlayStation%20Store%20gift%20card%2C%20high-quality%20product%20photography%2C%20clean%20white%20background%2C%20professional%20lighting%2C%20centered%20composition%2C%20sharp%20details%2C%20minimalist%20style%2C%20commercial%20product%20shot%2C%20isolated%20product%2C%20professional%20e-commerce%20photography%2C%20crisp%20edges%2C%20premium%20look%20and%20feel&width=80&height=80&seq=10&orientation=squarish",
    description: "بطاقة هدايا بقيمة 50 دولار لمتجر بلايستيشن"
  }
];

// دالة لتحميل بيانات المستخدم من localStorage
function loadUserData() {
  const savedData = localStorage.getItem('studyTimeUser');
  if (savedData) {
    userData = JSON.parse(savedData);
    updateUserInterface();
  }
}

// دالة لحفظ بيانات المستخدم في localStorage
function saveUserData() {
  localStorage.setItem('studyTimeUser', JSON.stringify(userData));
  updateUserInterface();
}

// دالة لتحديث واجهة المستخدم بناءً على بيانات المستخدم
function updateUserInterface() {
  // تحديث عرض النقاط
  document.getElementById('userPoints').textContent = userData.points;
  document.getElementById('profilePoints').textContent = userData.points;
  
  // تحديث معلومات الملف الشخصي
  document.getElementById('profileUsername').textContent = userData.name;
  document.getElementById('profileHandle').textContent = userData.handle;
  document.getElementById('profileImage').src = userData.picture;
  document.getElementById('watchTime').textContent = userData.watchTime + ' ساعة';
  document.getElementById('videosCount').textContent = userData.videosWatched;
  
  // تحديث إحصائيات المشاهدة
  document.getElementById('avgWatchTime').textContent = (userData.watchTime / 7).toFixed(1) + ' ساعة';
  document.getElementById('bestDay').textContent = 'الجمعة';
  
  // إخفاء نافذة تسجيل الدخول إذا كان المستخدم مسجل الدخول
  if (userData.isLoggedIn) {
    document.getElementById('loginModal').classList.add('hidden');
  }
  
  // تحديث سجل المشاهدات
  updateViewingHistory();
  
  // تحديث سجل المكافآت
  updateRewardsHistory();
  
  // تحديث عرض المكافآت
  updateRewards();
}

// دالة لتحديث عرض سجل المشاهدات
function updateViewingHistory() {
  const container = document.getElementById('viewingHistoryContainer');
  container.innerHTML = '';
  
  if (userData.watchHistory.length === 0) {
    container.innerHTML = '<p class="text-center text-gray-500 py-4">لا يوجد سجل مشاهدات حتى الآن</p>';
    return;
  }
  
  userData.watchHistory.forEach(history => {
    const video = videoTopics.find(v => v.id === history.videoId) || {
      title: 'فيديو غير معروف',
      duration: '0 دقيقة',
      points: 0,
      thumbnail: 'unknown'
    };
    
    container.innerHTML += `
    <div class="bg-white rounded-lg shadow-sm p-3 flex">
      <div class="w-20 h-20 rounded overflow-hidden flex-shrink-0">
        <img src="https://readdy.ai/api/search-image?query=Professional%20educational%20video%20thumbnail%2C%20${video.thumbnail}%2C%20educational%20content%2C%20high-quality%20tech%20education&width=80&height=80&seq=${history.videoId}&orientation=squarish" class="w-full h-full object-cover object-top" alt="${video.title}">
      </div>
      <div class="flex-1 mr-3">
        <h3 class="font-bold mb-1">${video.title}</h3>
        <div class="flex items-center mb-1">
          <i class="ri-time-line text-gray-500 ml-1"></i>
          <span class="text-xs text-gray-500">${video.duration}</span>
          <span class="mx-2 text-gray-300">|</span>
          <i class="ri-calendar-line text-gray-500 ml-1"></i>
          <span class="text-xs text-gray-500">${history.date}</span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-xs text-gray-500">${history.completed ? 'تمت المشاهدة كاملة' : 'تمت المشاهدة جزئياً (' + history.percentage + '%)'}</span>
          <div class="flex items-center bg-green-100 px-2 py-1 rounded">
            <i class="ri-coin-line text-green-600 ml-1"></i>
            <span class="text-xs font-bold text-green-600">+${history.pointsEarned} نقطة</span>
          </div>
        </div>
      </div>
    </div>
    `;
  });
}

// دالة لتحديث عرض سجل المكافآت
function updateRewardsHistory() {
  const container = document.getElementById('rewardsHistoryContainer');
  container.innerHTML = '';
  
  if (userData.rewardsHistory.length === 0) {
    container.innerHTML = '<p class="text-center text-gray-500 py-4">لا يوجد سجل مكافآت حتى الآن</p>';
    return;
  }
  
  userData.rewardsHistory.forEach(reward => {
    container.innerHTML += `
    <div class="bg-white rounded-lg shadow-sm p-3">
      <div class="flex justify-between mb-2">
        <h3 class="font-bold">${reward.title}</h3>
        <span class="text-xs text-gray-500">${reward.date}</span>
      </div>
      <div class="flex items-center mb-2">
        <i class="ri-coin-line text-yellow-500 ml-1"></i>
        <span class="text-sm font-bold">${reward.points} نقطة</span>
      </div>
      <div class="flex justify-between items-center">
        <span class="text-xs">${reward.code ? 'رمز البطاقة: ' + reward.code : 'تم إرسال الرمز للبريد الإلكتروني'}</span>
        <span class="bg-${reward.status === 'completed' ? 'green' : 'yellow'}-100 text-${reward.status === 'completed' ? 'green' : 'yellow'}-600 text-xs px-2 py-1 rounded">
          ${reward.status === 'completed' ? 'تم الاستلام' : 'قيد التنفيذ'}
        </span>
      </div>
    </div>
    `;
  });
}

// دالة لتحديث عرض المكافآت
function updateRewards() {
  const container = document.getElementById('allRewardsContainer');
  container.innerHTML = '';
  
  rewards.forEach(reward => {
    const percentage = Math.min(100, Math.floor((userData.points / reward.points) * 100));
    const canRedeem = userData.points >= reward.points;
    
    container.innerHTML += `
    <div class="bg-white rounded-lg shadow-sm p-3 flex cursor-pointer">
      <div class="w-20 h-20 rounded overflow-hidden flex-shrink-0">
        <img src="${reward.image}" class="w-full h-full object-cover object-top" alt="${reward.title}">
      </div>
      <div class="flex-1 mr-3">
        <div class="flex justify-between items-start mb-1">
          <h3 class="font-bold">${reward.title}</h3>
          <div class="flex items-center">
            <i class="ri-coin-line text-yellow-500 mr-1"></i>
            <span class="font-bold">${reward.points}</span>
          </div>
        </div>
        <p class="text-xs text-gray-500 mb-2">${reward.description}</p>
        <div class="progress-bar">
          <div class="progress-fill bg-primary" style="width: ${percentage}%"></div>
        </div>
        <div class="flex justify-between mt-1">
          ${canRedeem ? 
            `<span class="text-xs text-primary font-bold">يمكنك الاستبدال الآن!</span>
             <button class="bg-primary text-white text-xs px-2 py-1 rounded-button cursor-pointer" onclick="redeemReward('${reward.title}', ${reward.points})">استبدال</button>` 
            : 
            `<span class="text-xs text-gray-500">جمعت: ${userData.points}</span>
             <span class="text-xs text-gray-500">المتبقي: ${reward.points - userData.points}</span>`
          }
        </div>
      </div>
    </div>
    `;
  });
}

// دالة لاستبدال المكافأة
function redeemReward(title, points) {
  if (userData.points < points) {
    showAlert('خطأ', 'ليس لديك نقاط كافية لاستبدال هذه المكافأة', 'error');
    return;
  }
  
  // إنشاء رمز عشوائي للمكافأة
  const code = generateRandomCode();
  
  // خصم النقاط من رصيد المستخدم
  userData.points -= points;
  
  // إضافة المكافأة إلى سجل المكافآت
  userData.rewardsHistory.unshift({
    title: title,
    points: points,
    date: getCurrentDate(),
    code: code,
    status: 'completed'
  });
  
  // حفظ بيانات المستخدم
  saveUserData();
  
  // عرض رسالة نجاح
  showAlert('تهانينا!', `تم استبدال ${title} بنجاح. الرمز الخاص بك هو: ${code}`, 'success');
}

// دالة لإنشاء رمز عشوائي
function generateRandomCode() {
  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
  let code = '';
  
  // إنشاء 4 مجموعات من 4 أحرف مفصولة بشرطة
  for (let i = 0; i < 4; i++) {
    for (let j = 0; j < 4; j++) {
      code += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    if (i < 3) code += '-';
  }
  
  return code;
}

// دالة للحصول على التاريخ الحالي بتنسيق مناسب
function getCurrentDate() {
  const date = new Date();
  const day = date.getDate();
  const month = date.getMonth() + 1;
  const year = date.getFullYear();
  
  const monthNames = [
    'يناير', 'فبراير', 'مارس', 'إبريل', 'مايو', 'يونيو',
    'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'
  ];
  
  return `${day} ${monthNames[month - 1]} ${year}`;
}

// دالة لعرض رسالة تنبيه
function showAlert(title, message, type) {
  const icon = type === 'success' ? 'ri-check-line' : type === 'error' ? 'ri-error-warning-line' : 'ri-information-line';
  const color = type === 'success' ? 'green' : type === 'error' ? 'red' : 'blue';
  
  const alertModal = document.createElement('div');
  alertModal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
  alertModal.innerHTML = `
  <div class="bg-white rounded-lg p-6 m-4 max-w-sm w-full">
    <div class="text-center">
      <i class="${icon} ri-3x text-${color}-500 mb-4"></i>
      <h3 class="font-bold text-xl mb-2">${title}</h3>
      <p class="text-gray-600 mb-4">${message}</p>
      <button class="bg-primary text-white px-6 py-2 rounded-button w-full" onclick="this.closest('.fixed').remove()">
        حسناً
      </button>
    </div>
  </div>
  `;
  document.body.appendChild(alertModal);
}

// دالة لمعالجة تسجيل الدخول
function handleLogin(email, password) {
  // في تطبيق حقيقي، يجب التحقق من صحة بيانات تسجيل الدخول مع الخادم
  // لكن في هذا المثال، سنقوم بإنشاء مستخدم جديد أو تسجيل الدخول للمستخدم الحالي
  
  userData.isLoggedIn = true;
  userData.email = email;
  
  // إذا لم يكن لدى المستخدم اسم، نستخدم جزء البريد الإلكتروني قبل @
  if (userData.name === 'المستخدم') {
    userData.name = email.split('@')[0];
    userData.handle = '@' + email.split('@')[0].toLowerCase();
  }
  
  // حفظ بيانات المستخدم
  saveUserData();
  
  // إخفاء نافذة تسجيل الدخول
  document.getElementById('loginModal').classList.add('hidden');
  
  // عرض رسالة نجاح
  showAlert('مرحباً!', `تم تسجيل الدخول بنجاح. مرحباً بك ${userData.name}!`, 'success');
}

// دالة لمعالجة إنشاء حساب جديد
function handleRegister(fullName, email, password) {
  // في تطبيق حقيقي، يجب إرسال بيانات التسجيل إلى الخادم
  // لكن في هذا المثال، سنقوم بإنشاء مستخدم جديد محلياً
  
  userData.isLoggedIn = true;
  userData.name = fullName;
  userData.email = email;
  userData.handle = '@' + fullName.toLowerCase().replace(/\s+/g, '_');
  
  // حفظ بيانات المستخدم
  saveUserData();
  
  // إخفاء نافذة التسجيل
  document.getElementById('registerModal').classList.add('hidden');
  
  // عرض رسالة نجاح
  showAlert('مرحباً!', `تم إنشاء حسابك بنجاح. مرحباً بك ${fullName}!`, 'success');
}

// دالة لمعالجة تسجيل الخروج
function handleLogout() {
  const confirmModal = document.createElement('div');
  confirmModal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
  confirmModal.innerHTML = `
  <div class="bg-white rounded-lg p-6 m-4 max-w-sm w-full">
    <div class="text-center">
      <i class="ri-logout-box-line ri-3x text-red-500 mb-4"></i>
      <h3 class="font-bold text-xl mb-2">تأكيد تسجيل الخروج</h3>
      <p class="text-gray-600 mb-4">هل أنت متأكد من رغبتك في تسجيل الخروج؟</p>
      <div class="flex space-x-2 rtl:space-x-reverse">
        <button class="flex-1 bg-gray-100 text-gray-700 px-6 py-2 rounded-button" onclick="this.closest('.fixed').remove()">
          إلغاء
        </button>
        <button class="flex-1 bg-red-500 text-white px-6 py-2 rounded-button" onclick="confirmLogout()">
          تأكيد
        </button>
      </div>
    </div>
  </div>
  `;
  document.body.appendChild(confirmModal);
}

// دالة لتأكيد تسجيل الخروج
function confirmLogout() {
  // حفظ النقاط والسجلات قبل تسجيل الخروج
  const points = userData.points;
  const watchHistory = userData.watchHistory;
  const rewardsHistory = userData.rewardsHistory;
  const watchTime = userData.watchTime;
  const videosWatched = userData.videosWatched;
  
  // إعادة تعيين بيانات المستخدم
  userData = {
    isLoggedIn: false,
    name: 'المستخدم',
    handle: '@user',
    email: '',
    points: points, // الاحتفاظ بالنقاط
    watchTime: watchTime, // الاحتفاظ بوقت المشاهدة
    videosWatched: videosWatched, // الاحتفاظ بعدد الفيديوهات
    watchHistory: watchHistory, // الاحتفاظ بسجل المشاهدات
    rewardsHistory: rewardsHistory, // الاحتفاظ بسجل المكافآت
    picture: 'https://static.readdy.ai/image/ddc3a0bcd87da724c7129110fb2f7d18/ddf0eb05474860f8c8bafefaca9d5cb3.png'
  };
  
  // حفظ بيانات المستخدم
  saveUserData();
  
  // إظهار نافذة تسجيل الدخول
  document.getElementById('loginModal').classList.remove('hidden');
  
  // إزالة نافذة التأكيد
  document.querySelector('.fixed').remove();
  
  // العودة إلى صفحة الفيديوهات
  switchPage('videos');
}

// دالة لمعالجة اختيار ملف فيديو
function handleFileSelect(input) {
  const file = input.files[0];
  if (file) {
    const maxSize = 500 * 1024 * 1024; // 500MB
    if (file.size > maxSize) {
      showAlert('خطأ', 'حجم الملف يتجاوز 500MB', 'error');
      resetFileInput();
      return;
    }
    document.getElementById('uploadPreview').classList.remove('hidden');
    document.getElementById('fileName').textContent = file.name;
    document.getElementById('fileSize').textContent = formatFileSize(file.size);
  }
}

// دالة لإعادة تعيين حقل اختيار الملف
function resetFileInput() {
  document.getElementById('videoInput').value = '';
  document.getElementById('uploadPreview').classList.add('hidden');
  document.getElementById('fileName').textContent = '';
  document.getElementById('fileSize').textContent = '';
}

// دالة لتنسيق حجم الملف
function formatFileSize(bytes) {
  if (bytes === 0) return '0 Bytes';
  const k = 1024;
  const sizes = ['Bytes', 'KB', 'MB', 'GB'];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
}

// دالة لتبديل الصفحات
function switchPage(pageName) {
  const pages = {
    'videos': document.getElementById('videosPage'),
    'rewards': document.getElementById('rewardsPage'),
    'history': document.getElementById('historyPage'),
    'profile': document.getElementById('profilePage')
  };
  
  // إخفاء جميع الصفحات
  Object.values(pages).forEach(page => page?.classList.add('hidden'));
  
  // إظهار الصفحة المطلوبة
  pages[pageName]?.classList.remove('hidden');
  
  // تحديث أنماط علامات التبويب
  document.querySelectorAll('.tab-item').forEach(tab => {
    const tabPage = tab.getAttribute('data-page');
    const icon = tab.querySelector('i');
    const text = tab.querySelector('span');
    const isSelected = tabPage === pageName;
    
    tab.classList.toggle('active', isSelected);
    icon.classList.toggle('text-primary', isSelected);
    icon.classList.toggle('text-gray-500', !isSelected);
    text.classList.toggle('text-primary', isSelected);
    text.classList.toggle('text-gray-500', !isSelected);
  });
}

// دالة للانتقال إلى صفحة الفيديوهات
function switchToVideos() {
  switchPage('videos');
}

// دالة لعرض نافذة الإعدادات
function showSettingsModal(type) {
  const modalContent = {
    profile: {
      title: 'تعديل الملف الشخصي',
      content: `
      <form id="profileSettingsForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">الاسم</label>
          <input type="text" id="profileName" class="w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:border-primary" value="${userData.name}" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">البريد الإلكتروني</label>
          <input type="email" id="profileEmail" class="w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:border-primary" value="${userData.email}" required>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-sm font-medium text-gray-700">تغيير اسم المستخدم</span>
          <button type="button" onclick="showUsernameChangeModal()" class="text-primary text-sm font-medium hover:underline">تغيير</button>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">الصورة الشخصية</label>
          <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-primary">
            <i class="ri-upload-cloud-2-line ri-2x text-gray-400 mb-2"></i>
            <p class="text-sm text-gray-500">اضغط هنا لتحميل صورة جديدة</p>
          </div>
        </div>
      </form>
      `
    },
    privacy: {
      title: 'إعدادات الخصوصية',
      content: `
      <form id="privacySettingsForm" class="space-y-4">
        <div class="flex items-center justify-between py-2">
          <span class="text-sm">عرض حالة النشاط</span>
          <label class="relative inline-flex items-center cursor-pointer">
            <input type="checkbox" class="sr-only peer" checked>
            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
          </label>
        </div>
        <div class="flex items-center justify-between py-2">
          <span class="text-sm">السماح بالإشعارات</span>
          <label class="relative inline-flex items-center cursor-pointer">
            <input type="checkbox" class="sr-only peer" checked>
            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
          </label>
        </div>
        <div class="flex items-center justify-between py-2">
          <span class="text-sm">عرض تقدم التعلم</span>
          <label class="relative inline-flex items-center cursor-pointer">
            <input type="checkbox" class="sr-only peer" checked>
            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
          </label>
        </div>
      </form>
      `
    },
    notifications: {
      title: 'إعدادات الإشعارات',
      content: `
      <form id="notificationSettingsForm" class="space-y-4">
        <div class="flex items-center justify-between py-2">
          <span class="text-sm">إشعارات الدروس الجديدة</span>
          <label class="relative inline-flex items-center cursor-pointer">
            <input type="checkbox" class="sr-only peer" checked>
            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
          </label>
        </div>
        <div class="flex items-center justify-between py-2">
          <span class="text-sm">إشعارات المكافآت</span>
          <label class="relative inline-flex items-center cursor-pointer">
            <input type="checkbox" class="sr-only peer" checked>
            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
          </label>
        </div>
        <div class="flex items-center justify-between py-2">
          <span class="text-sm">إشعارات التذكير</span>
          <label class="relative inline-flex items-center cursor-pointer">
            <input type="checkbox" class="sr-only peer" checked>
            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
          </label>
        </div>
      </form>
      `
    }
  };
  
  const modal = document.createElement('div');
  modal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
  modal.innerHTML = `
  <div class="bg-white rounded-lg p-6 m-4 max-w-sm w-full">
    <div class="flex justify-between items-start mb-6">
      <h3 class="text-xl font-bold">${modalContent[type].title}</h3>
      <button class="w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-700" onclick="this.closest('.fixed').remove()">
        <i class="ri-close-line ri-lg"></i>
      </button>
    </div>
    ${modalContent[type].content}
    <div class="flex justify-end mt-6">
      <button class="bg-primary text-white px-6 py-2 rounded-button" onclick="saveSettings('${type}')">
        حفظ التغييرات
      </button>
    </div>
  </div>
  `;
  document.body.appendChild(modal);
}

// دالة لعرض نافذة تغيير اسم المستخدم
function showUsernameChangeModal() {
  // الحصول على بيانات المستخدم الحالية
  const currentUsername = userData.name;
  const currentHandle = userData.handle.replace('@', '');
  
  // إظهار نافذة تغيير اسم المستخدم
  document.getElementById('usernameChangeModal').classList.remove('hidden');
  document.getElementById('usernameChangeModal').classList.add('flex');
  
  // تعيين القيم الحالية
  document.getElementById('newUsername').value = currentUsername;
  document.getElementById('newHandle').value = currentHandle;
  
  // إغلاق نافذة إعدادات الملف الشخصي
  document.querySelector('.fixed').remove();
}

// دالة لحفظ الإعدادات
function saveSettings(type) {
  if (type === 'profile') {
    // الحصول على قيم النموذج
    const name = document.getElementById('profileName').value;
    const email = document.getElementById('profileEmail').value;
    
    // تحديث بيانات المستخدم
    userData.name = name;
    userData.email = email;
    
    // حفظ بيانات المستخدم
    saveUserData();
  }
  
  // عرض رسالة نجاح
  showAlert('تم الحفظ', 'تم حفظ التغييرات بنجاح', 'success');
  
  // إزالة نافذة الإعدادات
  document.querySelector('.fixed').remove();
}

// متغيرات لتشغيل الفيديو والعد التنازلي
let videoTimer;
let countdownInterval;
let videoProgress = 0;
let isVideoPlaying = false;

// دالة لبدء تشغيل الفيديو
function playVideo() {
  const video = document.getElementById('educationalVideo');
  const overlay = document.getElementById('mainVideoOverlay');
  
  if (video.paused) {
    video.play();
    overlay.style.display = 'none';
    startVideoTimer();
    isVideoPlaying = true;
    
    // تحديث حالة القفل
    document.getElementById('lockStatus').textContent = 'مقفل - جاري المشاهدة';
    document.getElementById('lockStatus').classList.add('text-yellow-500');
    document.getElementById('lockStatus').classList.remove('text-primary');
  }
}

// دالة لإيقاف تشغيل الفيديو
function pauseVideo() {
  const video = document.getElementById('educationalVideo');
  const overlay = document.getElementById('mainVideoOverlay');
  
  if (!video.paused) {
    video.pause();
    overlay.style.display = 'flex';
    clearInterval(videoTimer);
    clearInterval(countdownInterval);
    isVideoPlaying = false;
    
    // تحديث حالة القفل
    document.getElementById('lockStatus').textContent = 'مؤقت - توقفت المشاهدة';
    document.getElementById('lockStatus').classList.add('text-primary');
    document.getElementById('lockStatus').classList.remove('text-yellow-500');
    
    // عرض تنبيه للمستخدم
    if (videoProgress < 100) {
      showAlert('تنبيه', 'يجب إكمال مشاهدة الفيديو للحصول على النقاط', 'error');
    }
  }
}

// دالة لبدء العد التنازلي وتتبع تقدم الفيديو
function startVideoTimer() {
  const video = document.getElementById('educationalVideo');
  const duration = video.duration;
  
  // إذا لم يتم تحميل مدة الفيديو بعد، ننتظر حتى يتم تحميلها
  if (isNaN(duration) || duration === 0) {
    video.addEventListener('loadedmetadata', startVideoTimer);
    return;
  }
  
  // تعيين الوقت المتبقي (45 دقيقة)
  let timeLeft = 45 * 60; // 45 دقيقة بالثواني
  
  // بدء العد التنازلي
  countdownInterval = setInterval(() => {
    timeLeft--;
    
    // تحديث عرض الوقت المتبقي
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    document.querySelector('.countdown').textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    
    // إذا انتهى الوقت، نوقف العد التنازلي
    if (timeLeft <= 0) {
      clearInterval(countdownInterval);
      completeVideo();
    }
  }, 1000);
  
  // تتبع تقدم الفيديو
  videoTimer = setInterval(() => {
    // حساب نسبة التقدم
    const currentTime = video.currentTime;
    videoProgress = Math.floor((currentTime / duration) * 100);
    
    // تحديث شريط التقدم
    document.getElementById('progressBar').style.width = `${videoProgress}%`;
    document.getElementById('completionPercentage').textContent = `${videoProgress}%`;
    
    // إذا اكتمل الفيديو، نوقف التتبع
    if (videoProgress >= 100) {
      clearInterval(videoTimer);
      completeVideo();
    }
  }, 1000);
}

// دالة لإكمال الفيديو
function completeVideo() {
  // إيقاف الفيديو
  const video = document.getElementById('educationalVideo');
  video.pause();
  
  // إيقاف العد التنازلي وتتبع التقدم
  clearInterval(countdownInterval);
  clearInterval(videoTimer);
  
  // تحديث حالة القفل
  document.getElementById('lockStatus').textContent = 'مكتمل';
  document.getElementById('lockStatus').classList.remove('text-primary', 'text-yellow-500');
  document.getElementById('lockStatus').classList.add('text-green-500');
  
  // تحديث شريط التقدم إلى 100%
  document.getElementById('progressBar').style.width = '100%';
  document.getElementById('completionPercentage').textContent = '100%';
  
  // إضافة النقاط للمستخدم
  userData.points += 100;
  
  // زيادة وقت المشاهدة
  userData.watchTime += 0.75; // 45 دقيقة = 0.75 ساعة
  
  // زيادة عدد الفيديوهات المشاهدة
  userData.videosWatched += 1;
  
  // إضافة الفيديو إلى سجل المشاهدات
  userData.watchHistory.unshift({
    videoId: 1, // الفيديو الرئيسي
    title: 'أساسيات البرمجة بلغة Python',
    date: getCurrentDate(),
    completed: true,
    percentage: 100,
    pointsEarned: 100
  });
  
  // حفظ بيانات المستخدم
  saveUserData();
  
  // عرض رسالة نجاح
  showAlert('تهانينا!', 'لقد أكملت مشاهدة الفيديو وحصلت على 100 نقطة', 'success');
}

// دالة لإنشاء الفيديوهات التعليمية
function generateVideos() {
  const container = document.getElementById('videoContainer');
  container.innerHTML = '';
  
  videoTopics.forEach((video, index) => {
    container.innerHTML += `
    <div class="bg-white rounded-lg shadow overflow-hidden">
      <div class="relative w-full" style="padding-top: 56.25%;">
        <video class="educational-video absolute top-0 left-0 w-full h-full object-cover" id="video-${video.id}" poster="https://readdy.ai/api/search-image?query=Professional%20educational%20video%20thumbnail%2C%20${video.thumbnail}%2C%20educational%20content%2C%20high-quality%20video%20player%20screenshot%2C%20digital%20classroom%2C%20modern%20UI%20design&width=375&height=211&seq=${index + 1}&orientation=landscape">
          <source src="${video.videoUrl}" type="video/mp4">
        </video>
        <div class="absolute top-0 left-0 w-full h-full bg-black/50 flex items-center justify-center video-overlay cursor-pointer" id="overlay-${video.id}">
          <i class="ri-play-circle-fill ri-3x text-white"></i>
        </div>
      </div>
      <div class="p-4">
        <h2 class="font-bold text-lg mb-2">${video.title}</h2>
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <i class="ri-time-line text-gray-500 ml-1"></i>
            <span class="text-sm text-gray-500">المدة: ${video.duration}</span>
          </div>
          <div class="flex items-center">
            <i class="ri-coin-line text-yellow-500 ml-1"></i>
            <span class="text-sm font-bold">${video.points} نقطة</span>
          </div>
        </div>
      </div>
    </div>
    `;
  });
  
  // إضافة مستمعي الأحداث للفيديوهات
  videoTopics.forEach(video => {
    const videoElement = document.getElementById(`video-${video.id}`);
    const overlayElement = document.getElementById(`overlay-${video.id}`);
    
    if (videoElement && overlayElement) {
      // عند النقر على الغلاف، تشغيل الفيديو
      overlayElement.addEventListener('click', function() {
        videoElement.play();
        overlayElement.style.display = 'none';
      });
      
      // عند إيقاف الفيديو، إظهار الغلاف
      videoElement.addEventListener('pause', function() {
        overlayElement.style.display = 'flex';
      });
      
      // عند انتهاء الفيديو، إظهار الغلاف وإضافة النقاط
      videoElement.addEventListener('ended', function() {
        overlayElement.style.display = 'flex';
        
        // إضافة النقاط للمستخدم
        userData.points += video.points;
        
        // زيادة وقت المشاهدة (تحويل الدقائق إلى ساعات)
        const durationInHours = parseInt(video.duration) / 60;
        userData.watchTime += durationInHours;
        
        // زيادة عدد الفيديوهات المشاهدة
        userData.videosWatched += 1;
        
        // إضافة الفيديو إلى سجل المشاهدات
        userData.watchHistory.unshift({
          videoId: video.id,
          title: video.title,
          date: getCurrentDate(),
          completed: true,
          percentage: 100,
          pointsEarned: video.points
        });
        
        // حفظ بيانات المستخدم
        saveUserData();
        
        // عرض رسالة نجاح
        showAlert('تهانينا!', `لقد أكملت مشاهدة الفيديو وحصلت على ${video.points} نقطة`, 'success');
      });
    }
  });
}

// عند تحميل الصفحة
document.addEventListener('DOMContentLoaded', function() {
  // تحميل بيانات المستخدم
  loadUserData();
  
  // إنشاء الفيديوهات التعليمية
  generateVideos();
  
  // إضافة مستمع حدث للفيديو الرئيسي
  const mainVideo = document.getElementById('educationalVideo');
  const mainOverlay = document.getElementById('mainVideoOverlay');
  
  mainOverlay.addEventListener('click', playVideo);
  
  mainVideo.addEventListener('pause', function() {
    if (isVideoPlaying) {
      pauseVideo();
    }
  });
  
  mainVideo.addEventListener('ended', function() {
    completeVideo();
  });
  
  // مستمع حدث لنموذج تسجيل الدخول
  document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    handleLogin(email, password);
  });
  
  // مستمع حدث لنموذج إنشاء حساب
  document.getElementById('registerForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const fullName = document.getElementById('fullName').value;
    const email = document.getElementById('registerEmail').value;
    const password = document.getElementById('registerPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    
    if (password !== confirmPassword) {
      showAlert('خطأ', 'كلمة المرور غير متطابقة', 'error');
      return;
    }
    
    handleRegister(fullName, email, password);
  });
  
  // مستمع حدث لنموذج تغيير اسم المستخدم
  document.getElementById('usernameChangeForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const newUsername = document.getElementById('newUsername').value;
    const newHandle = document.getElementById('newHandle').value;
    
    // تحديث بيانات المستخدم
    userData.name = newUsername;
    userData.handle = '@' + newHandle;
    
    // حفظ بيانات المستخدم
    saveUserData();
    
    // إخفاء النافذة
    document.getElementById('usernameChangeModal').classList.remove('flex');
    document.getElementById('usernameChangeModal').classList.add('hidden');
    
    // عرض رسالة نجاح
    showAlert('تم التغيير', 'تم تغيير اسم المستخدم بنجاح', 'success');
  });
  
  // مستمع حدث لنموذج رفع الفيديو
  document.getElementById('uploadForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    // عرض نافذة تقدم الرفع
    const progressModal = document.createElement('div');
    progressModal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
    progressModal.innerHTML = `
    <div class="bg-white rounded-lg p-6 m-4 max-w-sm w-full">
      <div class="text-center">
        <i class="ri-upload-cloud-2-line ri-3x text-primary mb-4"></i>
        <h3 class="font-bold text-xl mb-2">جاري رفع الفيديو</h3>
        <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
          <div class="bg-primary h-2 rounded-full" style="width: 0%" id="uploadProgress"></div>
        </div>
        <p class="text-gray-600" id="uploadStatus">0%</p>
      </div>
    </div>
    `;
    document.body.appendChild(progressModal);
    
    // محاكاة تقدم الرفع
    let progress = 0;
    const interval = setInterval(() => {
      progress += 5;
      if (progress <= 100) {
        document.getElementById('uploadProgress').style.width = progress + '%';
        document.getElementById('uploadStatus').textContent = progress + '%';
      } else {
        clearInterval(interval);
        document.getElementById('uploadModal').classList.remove('flex');
        document.getElementById('uploadModal').classList.add('hidden');
        progressModal.remove();
        
        // عرض رسالة نجاح
        showAlert('تم الرفع', 'تم رفع الفيديو بنجاح وسيتم مراجعته قريباً', 'success');
        resetFileInput();
      }
    }, 100);
  });
  
  // مستمع حدث للتبديل بين نافذة تسجيل الدخول وإنشاء حساب
  document.getElementById('showRegister').addEventListener('click', function() {
    document.getElementById('loginModal').classList.add('hidden');
    document.getElementById('registerModal').classList.remove('hidden');
    document.getElementById('registerModal').classList.add('flex');
  });
  
  document.getElementById('showLogin').addEventListener('click', function() {
    document.getElementById('registerModal').classList.remove('flex');
    document.getElementById('registerModal').classList.add('hidden');
    document.getElementById('loginModal').classList.remove('hidden');
  });
  
  // مستمع حدث للتبديل بين علامات تبويب السجل
  document.querySelectorAll('.history-tab').forEach(tab => {
    tab.addEventListener('click', function() {
      const tabName = this.getAttribute('data-tab');
      
      // تبديل عرض المحتوى
      document.querySelectorAll('.history-content').forEach(content => {
        content.classList.toggle('hidden', content.id !== tabName);
      });
      
      // تحديث أنماط علامات التبويب
      document.querySelectorAll('.history-tab').forEach(t => {
        const isSelected = t === this;
        t.classList.toggle('bg-white', isSelected);
        t.classList.toggle('text-primary', isSelected);
        t.classList.toggle('shadow-sm', isSelected);
        t.classList.toggle('text-gray-500', !isSelected);
      });
    });
  });
  
  // مستمع حدث للتبديل بين الصفحات
  document.querySelectorAll('.tab-item').forEach(tab => {
    tab.addEventListener('click', function() {
      const pageName = this.getAttribute('data-page');
      switchPage(pageName);
    });
  });
});

// دالة لمعالجة تسجيل الدخول بحساب Google
function handleGoogleSignIn(response) {
  // في تطبيق حقيقي، يجب التحقق من صحة بيانات تسجيل الدخول مع الخادم
  // لكن في هذا المثال، سنقوم بإنشاء مستخدم جديد أو تسجيل الدخول للمستخدم الحالي
  
  userData.isLoggedIn = true;
  userData.email = 'google.user@gmail.com';
  userData.name = 'مستخدم Google';
  userData.handle = '@google_user';
  
  // حفظ بيانات المستخدم
  saveUserData();
  
  // إخفاء نافذة تسجيل الدخول
  document.getElementById('loginModal').classList.add('hidden');
  
  // عرض رسالة نجاح
  showAlert('مرحباً!', 'تم تسجيل الدخول بنجاح باستخدام حساب Google', 'success');
}
</script>
</body>
</html>
